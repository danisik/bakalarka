%CHAPTER
\chapter{Knihovny}
V~programování můžeme knihovnu definovat jako kolekci předem zkompilovaných procedur, funkcí (v~objektovém programování i třídy a objekty), konstant a datových typů. Knihovna by měla být následně i dobře zdokumentována pro její snadnější zakomponování do již existujících modulů (při používání nezdokumentovaných knihoven se musí provádět takzvaný reverse engineering pro zjištění všech procedur a funkcí, nebo vyhledávat už hotová řešení na internetu). 
\par
Knihovny jsou z~technického hlediska rozděleny do dvou skupin, které se následně rozdělují do dvou podskupin:
	\begin{itemize}
	\item \verb|Rozdělení z~hlediska způsobu propojení s~programem:|
		\begin{itemize}
		\item \verb|Statická knihovna| -- Zdrojový kód knihovny je v~průběhu překládání zkopírován do výsledného programu pomocí kompilátoru. Největší výhoda statických knihoven spočívá v~jistotě, že všechny potřebné knihovny budou přítomny ve výsledném programu, proto nikdy nemůže nastat situace nazvaná \textit{dependency hell (DLL Hell)}, která značí nepřítomnost jedné nebo více knihoven, které jsou využívány jinou knihovnou, nebo také může značit nadbytečné závislosti knihoven, které nejsou ve výsledku využity.
		\item \verb|Dynamická knihovna| -- Oproti statickým knihovnám nejsou zdrojové kódy dynamických knihoven zakomponovány ve výsledném programu, ale pomocí linkeru jsou vytvořeny záznamy na funkce použité v~programu, které jsou následně uloženy do tabulky symbolů vyskytující se ve výsledném programu.
		\end{itemize}
	\item \verb|Rozdělení z~hlediska sdílení kódu mezi programy:|
		\begin{itemize}
		\item \verb|Sdílená knihovna| -- Zdrojový kód sdílených knihoven je možné sdílet mezi více programy. Tímto způsobem jsou efektivně sníženy nároky na velikost operační paměti, protože úseky kódu využívané více procesy jsou uloženy ve sdílené paměti (namapovány do adresních prostorů všech procesů, které ji využívají).
		\item \verb|Nesdílená knihovna| -- Nesdílené knihovny neumožňují sdílet úseky kódu více procesům.
		\end{itemize}
	\end{itemize}
%SECTION
\section{PHP knihovny pro generování PDF}
%SUBSECTION
\subsection{FPDF}
\textbf{Free PDF} (zkráceně FPDF) [\url{http://www.fpdf.org/}] je knihovna psaná v~jazyce PHP a slouží pro generování souborů PDF bez využití externích programů. Díky volně dostupným zdrojovým kódům lze na veřejných stránkách nalézt velice užitečná rozšíření této knihovny. Mezi hlavní funkce patří například automatické zalamování stránek, komprese stránek, hyperlinky a mnoho dalších. Bohužel zde nejdou vytvářet interaktivní formuláře, proto nelze tuto knihovnu použít pro vyvíjený modul.
%SUBSECTION	
\subsection{dompdf}
PHP knihovna \textbf{dompdf} [\url{https://dompdf.github.io/}] má za úkol převést HTML kód do souboru PDF. Své funkce dosáhne za pomoci externí knihovny \textit{PDFlib} (placená) nebo pomocí třídy \textit{R\&OS CPDF} (autorem je \textit{Wayne Munro}). Mezi hlavní funkce patří podpora 8/24/32-bitových obrázků (bitmapové a JPEG), externí CSS styly uložené na jiných stránkách/FTP, podpora atributů v~HTML 4.0 aj. Bohužel \textbf{dompdf} není vhodná pro vyvíjený modul z~důvodu neschopnosti vytvářet interaktivní formuláře (za podmínky využití přiložené pomocné třídy místo knihovny PDFlib).
%SUBSECTION
\subsection{TCPDF} \label{subsec:tcpdf}
Knihovna \textbf{TCPDF} [\url{https://tcpdf.org/}] je otevřená knihovna PHP sloužící pro práci se soubory PDF. Její vývoj odstartoval už v~roce 2002, kdy vznikla jako odnož knihovny FPDF. Díky rozmanitosti jejich funkcí pro vytváření souborů PDF si ji oblíbilo mnoho uživatelů a je využívána i na mnoha webových portálech. Mezi hlavní funkce lze zařadit například podporu kódování UTF-8, kompresi stránek, vkládání zdrojových souborů, šifrování celého dokumentu, vkládání čárových kódů  aj. Protože je psána pouze v~jazyce PHP a nevyužívá žádné externí knihovny, pak ji lze brát jako vhodnou knihovnu pro vyvíjený modul.
%SUBSECTION
\subsection{HTML2FDPF}
\textbf{HTML2FPDF} [\url{https://www.html2pdf.fr/}] vychází z~již existující knihovny FPDF a má za úkol převést HTML kód a vytvořit z~něj soubor PDF. Bohužel tato knihovna už není dále vyvíjena, ale stále funguje na všech verzích PHP. Mezi hlavní nevýhody lze zařadit nemožnost vytvářet interaktivní formuláře, proto ji nelze využít pro vyvíjený modul.
%SUBSECTION		
\subsection{mPDF}
\textbf{mPDF} [\url{https://mpdf.github.io/}] je další PHP knihovna pro generování souborů PDF, která obsahuje velké množství užitečných funkcí. Byla vyvinuta z~již existujících knihoven \textit{FPDF} a \textit{HTML2FPDF}. Převádí HTML kód a vytváří z~něj soubor PDF se všemi prvky HTML (až na výjimky jako například nemožnost zobrazit tlačítko). Oproti knihovnám, ze kterých \textit{mPDF} vychází, je tvorba PDF výrazně pomalejší. Podle autora knihovny zpomalení způsobuje užití Unicode fontů. Na druhou stranu je nespornou výhodou možnost využít kaskádové styly. Mezi hlavní funkce se řadí vytváření interaktivních formulářů, kódování UTF-8 HTML kódu, vkládání vodoznaku do stránek a mnoho dalšího. Z~důvodu možnosti vytvářet interaktivní formuláře a nezávislosti na externích programech lze tuto knihovnu využít pro vyvíjený modul.
%SECTION	
\section{PHP Knihovny pro zpracování PDF}
%SUBSECTION		
\subsection{pdf-to-html}
Knihovna \textbf{pdf-to-html} [\url{https://github.com/mgufrone/pdf-to-html}] má za úkol překonvertovat veškerý obsah souboru PDF do struktury HTML, ze které lze snadno extrahovat obsah souboru a předat ho ke zpracování. Pro správné fungování této knihovny musí být v~konfiguraci PHP povolen přístup k~příkazové řádce systému a na serveru musí být nainstalovaný \textit{Poppler} (knihovna napsaná v~jazyce C++ sloužící k~renderování dokumentů PDF) \cite{pdfToHtml}. Protože je tato knihovna závislá na knihovně (Poppler), nelze ji brát jako vhodnou pro vyvíjený modul. 
%SUBSECTION		
\subsection{TCPDF parser}
\textbf{TCPDF parser} [\url{https://tcpdf.org/}] je součást knihovny \textbf{TCPDF} (viz \ref{subsec:tcpdf}), která zpracovává soubor PDF. Pro svůj běh nepotřebuje žádné externí knihovny a je psána pouze v~jazyce PHP, ale stále se nachází ve fázi vývoje, proto jsem zvolil jinou knihovnu.

%SUBSECTION		
\subsection{PDF Parser}
\textbf{PDF Parser} [\url{https://pdfparser.org/}] je další z~mnoha knihoven sloužících pro zpracování souborů PDF. Tato knihovna je založena na již existující knihovně \textbf{TCPDF parser}, která je navíc doplněna o~nové funkce jako je například extrakce metadat a komprimovaných souborů aj. Na stránkách PDF Parseru lze najít demo verzi, která demonstruje funkčnost, kdy po nahrání jakéhokoliv souboru PDF se na stránkách zobrazí data extrahovaná z~nahraného souboru. Vzhledem k~tomu, že PDF Parser je velice obsáhlá knihovna, využívá jí mnoho webových portálů pro zpracování souborů PDF, pak ji lze brát jako vhodnou knihovnu pro vyvíjený modul.
%SUBSECTION		
\subsection{php-pdftk}
Nástroj \textbf{PDF Toolkit} (zkráceně pdftk) [\url{https://www.drupal.org/project/phppdftk}] je multiplatformní nástroj pro manipulaci s~ soubory PDF, který navazuje na starší verzi nástroje \textbf{iText library}. PDF Toolkit lze najít ve třech verzích. Mezi neplacené verze patří \textit{PDFtk Server}, což je otevřený nástroj v~příkazové řádce a verze \textit{PDFtk Free}, která je úplně zdarma, zatímco mezi placené verze patří verze \textit{PDFtk Pro} (patří mezi proprietární software, jehož zdrojové soubory nejsou volně dostupné). Pomocí tohoto nástroje lze například oddělovat/spojovat/šifrovat soubory PDF, měnit vlastnosti, metadata, vyplňovat formuláře \textit{FDF daty} (Forms Data Format). Díky velkému množství funkcí PDF Toolkitu byla vyvinuta knihovna v~PHP s~názvem \textbf{php-pdftk}, pomocí které lze využívat veškeré funkce tohoto nástroje v~jazyce PHP. Bohužel díky závislosti na externím programu ji nelze brát jako vhodnou pro vyvíjený modul.
%SUBSECTION		
\subsection{pdftotext}
\textbf{pdftotext} [\url{https://pdftotext.com/}] je otevřený nástroj spouštěný v~příkazové řádce využívaný k~převodu souboru PDF do prostého textu využívající knihovnu \textit{Poppler}. Je volně dostupný v~linuxových distribucích (v~některých distribucích je součástí systému), zatímco pro Windows ho lze nalézt jako součást programu \textit{Xpdf}. Belgická firma \textit{Spatie} vyvinula otevřenou PHP knihovnu využívající tento nástroj, aby byl dostupný i v~jazyce PHP. Protože tato knihovna stejně jako \textbf{pdf-to-html} využívá Poppler, pak ji nelze brát jako vhodnou pro vyvíjený modul.
%SECTION	
\section{Závěr průzkumu}
Autor této práce provedl rozsáhlý průzkum zaměřující se na volně dostupné PHP knihovny pro generování a zpracování souborů PDF. Co se týče PHP knihoven pro generování interaktivních formulářů, pak zde existují  dvě vyhovující knihovny \textbf{mPDF} a \textbf{TCPDF}, které dokážou splnit veškeré požadavky zadavatele. Proto při vývoji modulu budou použity obě dvě a následně bude vybrána ta nejvíce vyhovující zadání. U~knihoven zpracovávajících soubory PDF to tak není, většina knihoven využívá pro své fungování externí programy/knihovny psané v~jiném programovacím jazyku a jsou převážně spouštěny z~příkazové řádky, což silně odporuje požadavkům zadavatele. Jediná knihovna splňující tyto požadavky byla \textbf{PDF Parser}, proto bude použita při vývoji modulu. 