%CHAPTER
\chapter{Knihovny}
V programování můžeme knihovnu definovat jako kolekci předem zkompilovaných procedur, funkcí (v objektovém programování i třídy a objekty), konstant a datové typy. Knihovna by měla být následně i dobře zdokumentována pro její snadnější zakomponování do již existujících modulů (při používání nezdokumentovaných knihoven se musí provádět takzvaný reverse engineering pro zjištění všech procedur a funkcí, nebo vyhledávat už hotová řešení na internetu). 
\par
Knihovny jsou z technického hlediska rozděleny do 2 skupin, které se následně rozdělují do 2 podskupin:
	\begin{itemize}
	\item \textbf{Rozdělení z hlediska způsobu propojení s programem:}
		\begin{itemize}
		\item \textit{Statická knihovna} - Zdrojový kód knihovny je v průběhu překládání zkopírován do výsledného programu pomocí kompilátoru. Největší výhoda statických knihoven spočívá v jistotě, že všechny potřebné knihovny budou přítomny ve výsledném programu, proto nikdy nemůže nastat situace nazvaná \textit{dependency hell (DLL Hell)}, která značí nepřítomnost jedné nebo více knihoven, které jsou využívány jinou knihovnou, nebo také může značit nadbytečné závislosti knihoven, které nejsou ve výsledku využity.
		\item \textit{Dynamická knihovna} - Oproti statickým knihovnám, zdrojové kódy dynamických knihoven nejsou zakomponovány ve výsledném programu, ale pomocí linkeru jsou vytvořeny záznamy na funkce použité v programu, které jsou následně uloženy do tabulky symbolů vyskytující se ve výsledném programu.
		\end{itemize}
	\item \textbf{Rozdělení z hlediska sdílení kódu mezi programy:}
		\begin{itemize}
		\item \textit{Sdílená knihovna} - Zdrojový kód sdílených knihoven je možné sdílet mezi více programy. Tímto způsobem jsou efektivně sníženy nároky na velikost operační paměti, protože úseky kódu využívané více procesory jsou uloženy ve sdílené paměti (namapovány do adresních prostorů všech procesů, které ji využívají).
		\item \textit{Nesdílená knihovna} - Nesdílené knihovny neumožňují sdílet úseky kódu více procesorům z důvodu kopírování kódu z knihoven do souborů při linkování souborů.
		\end{itemize}
	\end{itemize}
%SECTION
\section{PHP Knihovny pro generování PDF}
%SUBSECTION
\subsection{FPDF}
\textbf{Free PDF} (zkráceně FPDF) je knihovna psána v jazyce PHP a slouží pro generování PDF souborů bez využití externích programů, jejíž zdrojové kódy jsou volně dostupné a lze je modifikovat pro potřeby uživatele. Díky volně dostupným zdrojovým kódům lze na oficiální stránce nalézt velice užitečná rozšíření této knihovny. Mezi hlavní funkcionality patří například automatické zalomování stránek, komprese stránek, hyperlinky a mnoho dalších. Bohužel zde nejdou vytvářet interaktivní formuláře, proto nelze tuto knihovnu použít pro vyvíjený modul.
%SUBSECTION	
\subsection{dompdf}
Knihovna \textbf{dompdf} má za úkol převést HTML kód do PDF souboru pomocí jazyku PHP. Své funkcionality dosáhne ve dvou případech: za pomoci externí knihovny \textit{PDFlib} (placená), nebo pomocí třídy \textit{R\&OS CPDF} (sepsaná uživatelem \textit{Wayne Munro}). Mezi hlavní funkcionality patří podpora 8/24/32 bitových obrázků (bitmapové a jpeg), externí CSS styly uložené na jiných stránkách/ftp, podpora atributů v HTML 4.0 verzi aj. Bohužel \textbf{dompdf} není vhodná pro vyvíjený modul z důvodu neschopnosti vytvářet interaktivní formuláře (za podmínky využití přiložené pomocné třídy místo knihovny PDFlib).
%SUBSECTION
\subsection{TCPDF} \label{subsec:tcpdf}
Knihovna \textbf{TCPDF} je open-source PHP knihovna sloužící pro práci s PDF soubory. Její vývoj odstartoval už v roce 2002 kdy vznikla jako odnož knihovny FPDF. Díky její rozmanitosti funkcí pro vytváření PDF souborů si jí oblíbilo mnoho uživatelů a je využívána i na mnoha webových portálech. Mezi hlavní funkcionality lze zařadit například podporu UTF-8 kódování, komprese stránek, vkládání zdrojových souborů, šifrování celého dokumentu, vkládání čárových kódů  aj. Protože je psána pouze v jazyce PHP a nevyužívá žádné externí knihovny, pak ji lze brát jako vhodnou knihovnu pro vyvíjený modul.
%SUBSECTION
\subsection{HTML2FDPF}
\textbf{HTML2FPDF} vychází z již existující knihovny FPDF a má za úkol převést HTML kód a vytvořit z něj PDF soubor. Bohužel tato knihovna už není dále vyvíjena, ale stále funguje na všech verzích PHP. Mezi hlavní nevýhody lze zařadit nemožnost vytvářet interaktivní formuláře, proto ji nelze využít pro vyvíjený modul.
%SUBSECTION		
\subsection{mPDF}
Jedna z dalších PHP knihoven pro generování PDF souborů \textbf{mPDF} je velice chytrá knihovna obsahující množství funkcionalit. Byla vyvinuta z již existujících knihoven \textit{FPDF} a \textit{HTML2FPDF}, kdy převádí HTML kód a vytváří z něj PDF soubor se všemi HTML prkvy (až na výjimky jako například nemožnost zobrazit tlačítko). Oproti knihovnám, ze kterých \textit{mPDF} vychází, je tvorba PDF výrazně pomalejší z důvodu unicode fontů (pokud jsou použity) a zároveň z důvodu procesního času při tvorbě souboru. Jako hlavní funkcionality se řadí vytváření interaktivních formulářů, UTF-8 kódování pro HTML kód, vkládání vodoznaku do stránek a mnoho dalšího. Z důvodu možnosti vytvářet interaktivní formuláře a nezávislosti na externích programech lze tuto knihovnu využít pro vyvíjený modul.
%SECTION	
\section{PHP Knihovny pro zpracování PDF}
%SUBSECTION		
\subsection{pdf-to-html}
Knihovna \textbf{pdf-to-html} má za úkol překonvertovat veškerý obsah PDF souboru do HTML struktury, ze které lze snadno vyextrahovat obsah souboru a předat ho ke zpracování. Požadavky pro správné fungování této knihovny je mít v PHP konfiguraci mít povolen přístup k příkazové řádce systému a mít na serveru nainstalovaný \textit{Poppler} (knihovna napsaná v jazyce C++ sloužící k renderování PDF dokumentů) \cite{pdfToHtml}. Protože je tato knihovna závislá na knihovně (Poppler), pak ji nelze brát jako vhodnou pro vyvíjený modul. 
%SUBSECTION		
\subsection{TCPDF parser}
\textbf{TCPDF parser} je součást knihovny \textbf{TCPDF} (viz \ref{subsec:tcpdf}), která se soustředí na zpracování PDF souboru. Pro svůj běh nepotřebuje žádné externí knihovny a je psána pouze v jazyce PHP, ale stále se nachází ve fázi vývoje a při jejím použití nemusíme vždy dojít ke správnému výsledku. Proto z tohoto důvodu není nejvhodnější pro vyvíjený modul a bude lepší se ohlédnout po jiné knihovně.
%SUBSECTION		
\subsection{PDF Parser}
\textbf{PDF Parser} je další z mnoha knihoven sloužících pro zpracování PDF souborů. Tato knihovna je založena na již existující knihovně \textbf{TCPDF parser}, která je navíc doplněna o nové funkcionality jako je například extrakce metadat a komprimovaných souborů aj. Na oficiálních stránkách lze najít demo verzi, která demonstruje funkčnost, kdy po nahrání kteréhokoliv PDF souboru se na stránkách zobrazí data extrahovaná z nahraného souboru. Vzhledem k tomu, že PDF Parser je plně vyvinutá knihovna využívaná na mnoha webových portálech pro zpracování PDF souborů, pak ji lze brát jako vhodnou knihovnu pro vyvíjený modul.
%SUBSECTION		
\subsection{php-pdftk}
Nástroj \textbf{PDF Toolkit} (zkráceně pdftk) je multiplatformní nástroj pro manipulaci s PDF soubory, který navazuje na starší verzi nástroje \textbf{iText library}. PDF Toolkit lze najít ve třech verzích. Mezi neplacené verze patří \textit{PDFtk Server}, což je open-source tool v příkazové řádce a verze \textit{PDFtk Free}, která je úplně zdarma), zatímco mezi placené verze patří verze \textit{PDFtk Pro} (patří mezi proprietární software, jehož zdrojové soubory nejsou volně dostupné). Pomocí tohoto nástroje lze oddělovat/ spojovat/šifrovat PDF soubory, měnit jeho vlastnosti, metata, vyplňovat formuláře \textit{FDF daty} (Forms Data Format) a mnoho dalších funkcionalit \cite{phppdftk}. Díky rozsáhlé funkcionalitě byla vyvinuta knihovna v PHP s názvem \textbf{php-pdftk}, pomocí které lze využívat veškerou funkcionalitu tohoto nástroje v jazyce PHP. Bohužel díky závislosti na externím programu ji nelze brát jako vhodnou pro vyvíjený modul.
%SUBSECTION		
\subsection{pdftotext}
\textbf{pdftotext} je open-source nástroj spouštěný přes příkazovou řádku využívaný k převodu PDF souboru do prostého textu využívající knihovnu \textit{Poppler}. Je volně dostupný v Linuxových distribucích (v některých distribucích je součástí systému), zatímco pro Windows ho nalézt jako součást programu \textit{Xpdf}. Belgická firma \textit{Spatie} vyvinula open-source PHP knihovnu využívajcí tento nástroj, aby byl dostupný i v jazyce PHP. Protože tato knihovna stejně jako \textbf{pdf-to-html} využívá Poppler, pak ji nelze brát jako vhodnou pro vyvíjený modul.
%SECTION	
\section{Závěr průzkumu}
Autor této práce provedl rozsáhlý průzkum zaměřující se na volně dostupné PHP knihovny pro generování a zpracování PDF souborů. Co se týče PHP knihoven pro generování interaktivních formulářů, pak zde existují  dvě velice slušné knihovny \textbf{mPDF} a \textbf{TCPDF}, které dokáží  splnit veškeré požadavky zadávajícího. Proto při vývoji modulu budou použity obě dvě a následně bude vybrána ta nejvíce vyhovující zadání. U PHP knihoven zpracovávající PDF soubory to tak není, většina knihoven využívá pro svojí funkcionalitu externí programy/knihovny psané v jiném programovacím jazyku a jsou převážně spouštěny z příkazové řádky, což silně odporuje požadavkům zadávajícího. Jediná knihovna splňující tyto požadavky byla \textbf{PDF Parser}, proto bude použita při vývoji modulu. 